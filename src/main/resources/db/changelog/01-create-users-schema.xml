<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <changeSet author="Urooj Abbas" id="01">
        <createTable remarks="Used to store user's information"
                     tableName="users">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="name" type="varchar(50)">
                <constraints nullable="false" />
            </column>
            <column name="email" type="varchar(100)" />
            <column name="phone" type="varchar(56)" />
            <column name="address" type="varchar(256)">
                <constraints nullable="false" />
            </column>
            <column name="departmentid" type="int"/>
            <column name="cityid" type="int"/>
            <column name="regionid" type="int"/>
            <column name="gender" type="int"/>
            <column name="permanent" type="boolean"/>
            <column name="hiredate" type="date"/>
            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>

        <addUniqueConstraint
                tableName="users"
                columnNames="name"
                constraintName="unique_employee_name" />
    </changeSet>


    <changeSet author="Urooj" id="04">
        <addColumn tableName="users">
            <column name="username" type="varchar(256)">
            <constraints nullable="false" />
            </column>

        </addColumn>

            <addColumn tableName="users">
                <column name="password" type="varchar(1024)">
                    </column>
            </addColumn>

        <addUniqueConstraint
                tableName="users"
                columnNames="username"
                constraintName="unique_loging_name" />

    </changeSet>

    <changeSet author="Urooj" id="05">
    <createTable remarks="Adding city table"
                 tableName="city">
        <column name="cityname" type="varchar(128)">
            <constraints nullable="false" />
        </column>
        <column name="isdeleted" type="boolean">
        </column>
        <column autoIncrement="true" name="id" type="int">
            <constraints nullable="false" primaryKey="true" primaryKeyName="id"/>
        </column>
    </createTable>

        <addDefaultValue columnDataType="boolean"
                         columnName="isdeleted"
                         defaultValueBoolean="false"
                         tableName="city"/>

    </changeSet>

    <changeSet author="Urooj" id="06">
        <createTable remarks="Adding Vendor Category"
                     tableName="vendorcategory">
            <column name="categoryname" type="varchar(128)">
                <constraints nullable="false" />
            </column>
            <column name="isdeleted" type="boolean">
            </column>
            <column autoIncrement="true" name="id" type="int">
                <constraints nullable="false" primaryKey="true" primaryKeyName="id"/>
            </column>
        </createTable>

        <addDefaultValue columnDataType="boolean"
                         columnName="isdeleted"
                         defaultValueBoolean="false"
                         tableName="vendorcategory"/>

        <createTable remarks="Adding Customer Category"
                     tableName="customercategory">
            <column name="categoryname" type="varchar(128)">
                <constraints nullable="false" />
            </column>
            <column name="isdeleted" type="boolean">
            </column>
            <column autoIncrement="true" name="id" type="int">
                <constraints nullable="false" primaryKey="true" primaryKeyName="id"/>
            </column>
        </createTable>

        <addDefaultValue columnDataType="boolean"
                         columnName="isdeleted"
                         defaultValueBoolean="false"
                         tableName="customercategory"/>

    </changeSet>
<changeSet author="urooj" id="07">
    <createTable remarks="Adding Customer Category"
                 tableName="region">
        <column name="regionname" type="varchar(128)">
            <constraints nullable="false" />
        </column>
        <column name="isdeleted" type="boolean">
        </column>
        <column name="id" type="int">
            <constraints nullable="false" primaryKey="true" primaryKeyName="id"/>
        </column>
    </createTable>

    <addDefaultValue columnDataType="boolean"
                     columnName="isdeleted"
                     defaultValueBoolean="false"
                     tableName="region"/>
</changeSet>

    <changeSet author="urooj" id="08">

        <createTable remarks="Adding Vendor type table"
                     tableName="vendortype">

            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>

            <column  name="type" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column name="isdeleted" type="boolean" defaultValue="false"/>

        </createTable>
        <createTable remarks="Adding Vendor table"
                     tableName="vendor">

            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>

            <column  name="name" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column  name="address" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column name="email" type="varchar(100)" />

            <column  name="contactperson" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column  name="contactone" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column  name="contactpersontwo" type="varchar(50)">
            </column>

            <column  name="contacttwo" type="varchar(50)">
            </column>

            <column  name="ntn" type="varchar(30)"/>

            <column  name="strn" type="varchar(30)"/>

            <column  name="vendortypeid" type="int"/>

            <column  name="discount" type="int"/>

            <column  name="paymentterms" type="int"/>
            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>

        <addUniqueConstraint
                tableName="vendor"
                columnNames="name"
                constraintName="unique_vendor_name" />

        <addForeignKeyConstraint baseColumnNames="vendortypeid"
                                 baseTableName="vendor"
                                 constraintName="fk_vendor_type"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="vendortype"/>

    </changeSet>

    <changeSet author="urooj" id="09">
        <createTable remarks="Adding School Type"
                     tableName="institutetype">
            <column name="type" type="varchar(50)">
                <constraints nullable="false" />
            </column>
            <column name="isdeleted" type="boolean">
            </column>
            <column autoIncrement="true" name="id" type="int">
                <constraints nullable="false" primaryKey="true" primaryKeyName="id"/>
            </column>
        </createTable>

        <addDefaultValue columnDataType="boolean"
                         columnName="isdeleted"
                         defaultValueBoolean="false"
                         tableName="institutetype"/>

        <createTable remarks="Adding client Type"
                     tableName="clienttype">
            <column name="type" type="varchar(50)">
                <constraints nullable="false" />
            </column>
            <column name="isdeleted" type="boolean">
            </column>
            <column autoIncrement="true" name="id" type="int">
                <constraints nullable="false" primaryKey="true" primaryKeyName="id"/>
            </column>
        </createTable>

        <addDefaultValue columnDataType="boolean"
                         columnName="isdeleted"
                         defaultValueBoolean="false"
                         tableName="clienttype"/>

        <createTable remarks="Adding Client table"
                     tableName="client">

            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>

            <column  name="name" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column  name="address" type="varchar(100)">
                <constraints nullable="false" />
            </column>

            <column name="email" type="varchar(100)" />

            <column  name="principlename" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column  name="contact" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column  name="contactpersontwo" type="varchar(50)">
            </column>

            <column  name="contacttwo" type="varchar(50)">
            </column>

            <column  name="instituetypeid" type="int"/>

            <column  name="clienttypeid" type="int"/>

            <column  name="totalbranches" type="int"/>

            <column  name="strenght" type="int"/>

            <column  name="discount" type="int"/>

            <column  name="paymentterms" type="int"/>

            <column name="cityid" type="int"/>

            <column name="regionid" type="int"/>

            <column name="userid" type="int"/>

            <column name="modifiedbyuserid" type="int"/>

            <column name="modifiedtime" type="date"/>

            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>

        <addUniqueConstraint
                tableName="client"
                columnNames="name"
                constraintName="unique_client_name" />

        <addForeignKeyConstraint baseColumnNames="instituetypeid"
                                 baseTableName="client"
                                 constraintName="fk_institute_type"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="institutetype"/>

        <addForeignKeyConstraint baseColumnNames="clienttypeid"
                                 baseTableName="client"
                                 constraintName="fk_client_type"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="clienttype"/>

        <addForeignKeyConstraint baseColumnNames="cityid"
                                 baseTableName="client"
                                 constraintName="fk_client_city"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="city"/>

        <addForeignKeyConstraint baseColumnNames="regionid"
                                 baseTableName="client"
                                 constraintName="fk_client_region"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="region"/>

    </changeSet>

    <changeSet id="10" author="Urooj">
        <addColumn tableName="client">
            <column name="area" type="varchar(100)">
            </column>
        </addColumn>

        <addColumn tableName="client">
            <column name="clientstaus" type="int" defaultValue="1">
            </column>
        </addColumn>

    </changeSet>

    <changeSet author="AJ" id="101">
        <createTable remarks="Used to store employee designation types"
                     tableName="designation">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="name" type="varchar(100)">
                <constraints nullable="false" />
            </column>
            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>

             <createTable remarks="Used to employee department types"
                     tableName="department">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="name" type="varchar(100)">
                <constraints nullable="false" />
            </column>
            
            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>

    </changeSet>

    <changeSet author="AJ" id="102">

        <createTable remarks="Used to store possible payment types"
                     tableName="paymenttype">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="name" type="varchar(100)">
                <constraints nullable="false" />
            </column>
            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>

        <createTable remarks="Used to store employee contract types"
                     tableName="employeetype">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="name" type="varchar(100)">
                <constraints nullable="false" />
            </column>
            
            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>

        <createTable remarks="Used to store market segment types"
                     tableName="marketsegment">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="name" type="varchar(50)">
                <constraints nullable="false" />
            </column>
            
            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>

        <createTable remarks="Used to store curriculum types"
                     tableName="curriculumtype">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="name" type="varchar(50)">
                <constraints nullable="false" />
            </column>
            
            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>

        <createTable remarks="Used to store sale types"
                     tableName="saletype">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="name" type="varchar(50)">
                <constraints nullable="false" />
            </column>
            
            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable> 

        <createTable remarks="Used to define subjects"
                     tableName="subjects">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="name" type="varchar(100)">
                <constraints nullable="false" />
            </column>
                        <column  name="shortcode" type="varchar(10)">
                <constraints nullable="false" />
            </column>
            
            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>   

        <createTable remarks="Used to define paper quality"
                     tableName="paperquality">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="name" type="varchar(100)">
                <constraints nullable="false" />
            </column>
            
            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>          

    </changeSet>

    <changeSet id="11" author="Urooj">
        <createTable remarks="Adding language"
                     tableName="language">
            <column name="language" type="varchar(50)">
                <constraints nullable="false" />
            </column>
            <column name="languagecode" type="varchar(50)">
                <constraints nullable="false" />
            </column>
            <column name="isdeleted" type="boolean" defaultValue="true">
            </column>
            <column autoIncrement="true" name="id" type="int">
                <constraints nullable="false" primaryKey="true" primaryKeyName="id"/>
            </column>
        </createTable>

        <createTable remarks="Adding country"
                     tableName="country">
            <column name="country" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column name="countrycode" type="varchar(2)">
                <constraints nullable="false" />
            </column>

            <column name="isdeleted" type="boolean" defaultValue="true">
            </column>
            <column autoIncrement="true" name="id" type="int">
                <constraints nullable="false" primaryKey="true" primaryKeyName="id"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="12" author="urooj">
        <createTable remarks="Used to store Product category"
                     tableName="productcategory">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="name" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>

        <createTable remarks="Adding Product table"
                     tableName="product">

            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>

            <column  name="name" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column  name="isbn" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column  name="author" type="varchar(100)">
                <constraints nullable="false" />
            </column>

            <column  name="subject" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column  name="edition" type="varchar(50)"/>

            <column  name="barcode" type="varchar(50)">
            </column>

            <column  name="languageid" type="int">
                <constraints nullable="false" />
            </column>

            <column  name="publisher" type="varchar(100)"/>

            <column  name="countryid" type="int">
                <constraints nullable="false" />
            </column>

            <column  name="productcategoryid" type="int">
                <constraints nullable="false" />
            </column>

            <column  name="marketsegmentid" type="int">
                <constraints nullable="false" />
            </column>

            <column  name="pagecount" type="int"/>

            <column  name="productcost" type="double"/>

            <column name="paperqualityid" type="int">
                <constraints nullable="false" />
            </column>

            <column name="retailprice" type="double"/>

            <column name="userid" type="int"/>

            <column name="modifiedbyuserid" type="int"/>

            <column name="modifiedtime" type="date"/>

            <column name="insertedtime" type="date"/>

            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>

        <addUniqueConstraint
                tableName="product"
                columnNames="id,isbn"
                constraintName="unique_product_isbn" />


        <addForeignKeyConstraint baseColumnNames="languageid"
                                 baseTableName="product"
                                 constraintName="fk_product_language"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="language"/>
    </changeSet>

    <changeSet id="13" author="urooj">
        <addColumn tableName="users">
            <column name="designationid" type="int">
            </column>
        </addColumn>

        <addForeignKeyConstraint baseColumnNames="designationid"
                                 baseTableName="users"
                                 constraintName="fk_user_designation"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="designation"/>

        <addForeignKeyConstraint baseColumnNames="departmentid"
                                 baseTableName="users"
                                 constraintName="fk_user_department"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="department"/>
    </changeSet>

    <changeSet id="14" author="urooj">
        <addColumn tableName="product">
            <column name="vendorid" type="int">
            </column>
        </addColumn>

        <addForeignKeyConstraint baseColumnNames="vendorid"
                                 baseTableName="product"
                                 constraintName="fk_product_vendor"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="vendor"/>
    </changeSet>

    <changeSet id="15" author="urooj">
        <createTable remarks="Used to store Purchase Order  status lookup table"
                     tableName="postatustype">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="name" type="varchar(50)">
                <constraints nullable="false" />
            </column>

            <column name="isdeleted" type="boolean" defaultValue="false"/>
        </createTable>

        <createTable remarks="Used to store Purchase Order Master info"
                     tableName="pomaster">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column  name="vendorid" type="int">
                <constraints nullable="false" />
            </column>

            <column  name="userid" type="int">
                <constraints nullable="false" />
            </column>

            <column name="modifiedbyuserid" type="int"/>

            <column name="modifiedtime" type="date"/>

            <column name="insertedtime" type="date"/>

            <column name="isdeleted" type="boolean" defaultValue="false"/>

        </createTable>

        <createTable remarks="Used to store Purchase Order Detail info"
                     tableName="podetail">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="poid" type="int">
                nullable="false" />
            </column>
            <column name="productid" type="int">
                nullable="false" />
            </column>

            <column name="quantity" type="int"/>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="vendorid"
                                 baseTableName="pomaster"
                                 constraintName="fk_purchase_order_vendor"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="vendor"/>

        <addForeignKeyConstraint baseColumnNames="userid"
                                 baseTableName="pomaster"
                                 constraintName="fk_purchase_order_user"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="users"/>


        <createTable remarks="Used to store Purchase Order status info"
                     tableName="postatus">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>

            <column name="poid" type="int">
                nullable="false" />
            </column>
            <column name="postatusid" type="int">
                nullable="false" />
            </column>

            <column name="isactive" type="boolean" defaultValueBoolean="true"/>
            <column name="modifiedbyuserid" type="int"/>
            <column name="modifiedtime" type="date"/>

        </createTable>
    </changeSet>

    <changeSet id="16" author="urooj">
        <createTable remarks="Used to store inventory"
                     tableName="inventory">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="referenceid" type="int">
                nullable="false" />
            </column>

            <column name="productid" type="int">
                nullable="false" />
            </column>
            <column name="inventorytypeid" type="int">
                nullable="false" />
            </column>
            <column name="transactiontypeid" type="int">
                nullable="false" />
            </column>
            <column name="regionid" type="int">
                nullable="false" />
            </column>
            <column name="insertedbyuserid" type="int">
                nullable="false" />
            </column>
            <column name="insertedtime" type="date">
                nullable="false" />
            </column>
            <column name="quantity" type="int"/>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="productId"
                                 baseTableName="inventory"
                                 constraintName="fk_inventory_product"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="product"/>

        <createIndex indexName="idx_inventory_referenceId"
                     tableName="inventory">
            <column name="referenceid" type="int"/>
        </createIndex>

        <createIndex indexName="idx_inventory_productId"
                     tableName="inventory">
            <column name="productid" type="int"/>
        </createIndex>

        <createIndex indexName="idx_inventory_type"
                     tableName="inventory">
            <column name="inventorytypeid" type="int"/>
        </createIndex>

        <createIndex indexName="idx_inventory_trans_type"
                     tableName="inventory">
            <column name="transactiontypeid" type="int"/>
        </createIndex>

    </changeSet>
    <changeSet id="17" author="urooj">
        <createTable remarks="Used to store inventoryType"
                     tableName="inventorytype">
        <column name="id" type="int">
            <constraints primaryKey="true" nullable="false" />
        </column>
        <column name="name" type="varchar(100)">
            nullable="false" />
        </column>
        </createTable>
        <createTable remarks="Used to store referenceType"
                     tableName="referencetype">
            <column name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="name" type="varchar(100)">
                nullable="false" />
            </column>
        </createTable>
    </changeSet>

    <changeSet id="18" author="urooj">
        <createTable remarks="Used to store transactiontype"
                     tableName="transactiontype">
            <column name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="name" type="varchar(100)">
                nullable="false" />
            </column>
        </createTable>

    </changeSet>

    <changeSet id="19" author="urooj">
        <createTable remarks="Used to store Transaction Order Master info"
                     tableName="tomaster">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>

            <column  name="userid" type="int">
                <constraints nullable="false" />
            </column>

            <column  name="fromregion" type="int">
                <constraints nullable="false" />
            </column>

            <column  name="transfertype" type="int">
                <constraints nullable="false" />
            </column>

            <column  name="toregion" type="int">
                <constraints nullable="false" />
            </column>

            <column name="modifiedbyuserid" type="int"/>

            <column name="modifiedtime" type="date"/>

            <column name="insertedtime" type="date"/>

            <column name="isdeleted" type="boolean" defaultValue="false"/>

        </createTable>

        <createTable remarks="Used to store Transaction Order Detail info"
                     tableName="todetail">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="toid" type="int">
                nullable="false" />
            </column>
            <column name="productid" type="int">
                nullable="false" />
            </column>

            <column name="quantity" type="int"/>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="userid"
                                 baseTableName="tomaster"
                                 constraintName="fk_transfer_order_user"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="users"/>


        <createTable remarks="Used to store Transfer Order status info"
                     tableName="tostatus">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>

            <column name="toid" type="int">
                nullable="false" />
            </column>
            <column name="tostatusid" type="int">
                nullable="false" />
            </column>

            <column name="isactive" type="boolean" defaultValueBoolean="true"/>
            <column name="modifiedbyuserid" type="int"/>
            <column name="modifiedtime" type="date"/>

        </createTable>
    </changeSet>

    <changeSet id="20" author="urooj">
        <createTable remarks="Used to store Inventory Reference info"
                     tableName="inventoryreference">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>

            <column name="transactiontypeid" type="int">
                nullable="false" />
            </column>
            <column name="inventorytypeid" type="int">
                nullable="false" />
            </column>

            <column name="orderid" type="int">
                nullable="false" />
            </column>
        </createTable>
    </changeSet>

    <changeSet id="21" author="">
        <createTable remarks="Used to store Transaction Order Master info"
                     tableName="grnmaster">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>

            <column  name="userid" type="int">
                <constraints nullable="false" />
            </column>

            <column  name="poid" type="int">
                <constraints nullable="false" />
            </column>

            <column name="modifiedbyuserid" type="int"/>

            <column name="modifiedtime" type="date"/>

            <column name="insertedtime" type="date"/>

            <column name="isdeleted" type="boolean" defaultValue="false"/>

        </createTable>


        <createTable remarks="Used to store Transaction Order Master info"
                     tableName="grndetail">
            <column autoIncrement="true" name="id" type="int">
                <constraints primaryKey="true" nullable="false" />
            </column>

            <column  name="grnid" type="int">
                <constraints nullable="false" />
            </column>

            <column  name="productid" type="int">
                <constraints nullable="false" />
            </column>

            <column  name="quantity" type="int">
                <constraints nullable="false" />
            </column>

            <column  name="amount" type="double">
                <constraints nullable="false" />
            </column>


            <column name="isdeleted" type="boolean" defaultValue="false"/>

        </createTable>

        <addForeignKeyConstraint baseColumnNames="productid"
                                 baseTableName="grndetail"
                                 constraintName="fk_grndetail_product"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="product"/>

        <createIndex indexName="idx_grndetail_productId"
                     tableName="grndetail">
            <column name="productid" type="int"/>
        </createIndex>


    </changeSet>
    
    <changeSet author="ali" id="22">
        <createTable remarks="Adding Module Table"
                     tableName="modules">
            <column name="moduleName"  type="varchar(50)">
              <constraints nullable="false"/>
        </column>
            <column name="isdeleted" type="boolean">
                <constraints nullable="false" />
            </column>
            <column autoIncrement="true" name="id" type="int">
                <constraints nullable="false" primaryKey="true" primaryKeyName="id"/>
            </column>
        </createTable>

        <addDefaultValue columnDataType="boolean"
                         columnName="isdeleted"
                         defaultValueBoolean="false"
                         tableName="modules"/>
        
        <createTable remarks="Adding Module Permissions Table"
                     tableName="modulepermissions">
            <column name="permissionType" type="varchar(50)">
                <constraints nullable="false" />
            </column>
            <column name="isdeleted" type="boolean">
                <constraints nullable="false" />
            </column>
            <column autoIncrement="true" name="id" type="int">
                <constraints nullable="false" primaryKey="true" primaryKeyName="id"/>
            </column>
            <column name="moduleId" type="int">
                <constraints nullable="false" />
            </column>
        </createTable>

        <addDefaultValue columnDataType="boolean"
                         columnName="isdeleted"
                         defaultValueBoolean="false"
                         tableName="modulepermissions"/>
        
        <addForeignKeyConstraint baseColumnNames="moduleId"
                                 baseTableName="modulepermissions"
                                 constraintName="fk_modulePerm_moduleId"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="id"
                                 referencedTableName="modules"/>
        </changeSet>

<changeSet author="wajeeh" id="23">

    <createTable remarks="Used to store Users and the info"
                 tableName="userrole">

        <column autoIncrement="true" name="id" type="int">
            <constraints primaryKey="true" nullable="false" />
        </column>

        <column  name="roleName" type="varchar(50)">
            <constraints nullable="false" />
        </column>

        <column name="isDeleted" type="boolean" defaultValue="false"/>

        <column name="insertedtime" type="date"/>

        <column name="insertedbyuserid" type="int">
            nullable="false" />
        </column>

        <column name="modifiedbyuserid" type="int"/>

        <column name="modifiedtime" type="date"/>
    </createTable>

    <createTable remarks="Used to store Users and the info"
                 tableName="rolePermission">

        <column name="roleid" type="int">
            <constraints nullable="false" />
        </column>

        <column name="permissionTypeId" type="int">
            <constraints nullable="false" />
        </column>


    </createTable>

    <addPrimaryKey columnNames="roleid, permissionTypeId"
                   constraintName="pk_role_permission_PK"
                   tableName="rolepermission"/>

    <addForeignKeyConstraint baseColumnNames="roleid"
                             baseTableName="rolepermission"
                             constraintName="fk_userRole_roleid"
                             onDelete="CASCADE"
                             onUpdate="RESTRICT"
                             referencedColumnNames="id"
                             referencedTableName="userrole"/>

    <addForeignKeyConstraint baseColumnNames="permissionTypeId"
                             baseTableName="rolepermission"
                             constraintName="fk_modulePermissions_permissiontypeid"
                             onDelete="CASCADE"
                             onUpdate="RESTRICT"
                             referencedColumnNames="id"
                             referencedTableName="modulepermissions"/>

</changeSet>
    
    
    
    <changeSet author="ali" id="24">
        <createTable remarks="Adding Publisher Table"
                     tableName="Publisher">
            <column name="PublisherName" type="varchar(50)">
                <constraints nullable="false" />
            </column>
            <column name="isdeleted" type="boolean">
                <constraints nullable="false" />
            </column>
            <column autoIncrement="true" name="id" type="int">
                <constraints nullable="false" primaryKey="true" primaryKeyName="id"/>
            </column>
        </createTable>

        <addDefaultValue columnDataType="boolean"
                         columnName="isdeleted"
                         defaultValueBoolean="false"
                         tableName="Publisher"/>
    
        
    <dropNotNullConstraint 
            columnDataType="int"
            columnName="marketsegmentid"
            tableName="product"/>

    </changeSet>
    <changeSet id="25" author="wajeeh">
    <addColumn tableName="Users">
        <column name="reportingmanager" type="int"/>
    </addColumn>

    </changeSet>


</databaseChangeLog>